name = "memora-graph"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Pages configuration - serve from public directory
pages_build_output_dir = "public"

# D1 Databases - multiple databases supported via ?db= parameter
[[d1_databases]]
binding = "DB_MEMORA"
database_name = "memora-graph"
database_id = "bc1f5b0b-474d-4b96-a2f3-d15279b2ca57"

[[d1_databases]]
binding = "DB_OB1"
database_name = "ob1-graph"
database_id = "d194a6e6-44fa-437d-bfd7-1196c6dc9955"

# R2 Buckets - multiple buckets for images
[[r2_buckets]]
binding = "R2_MEMORA"
bucket_name = "memora"

[[r2_buckets]]
binding = "R2_OB1"
bucket_name = "ob1"

[vars]
# Graph settings
MIN_EDGE_SCORE = "0.40"
# WebSocket worker URL for real-time updates
WS_WORKER_URL = "https://memora-graph-sync.cloudflare-strategic612.workers.dev"
# Default database
DEFAULT_DB = "memora"
# Database config (JSON) - maps db name to binding suffix
DB_CONFIG = '{"memora": "MEMORA", "ob1": "OB1"}'
